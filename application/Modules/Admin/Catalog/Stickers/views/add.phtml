<?php
namespace JetShopModule\Admin\Catalog\Stickers;

use JetShop\Shops;
use JetShop\Sticker;
use Jet\MVC_View;
use Jet\Form;
use Jet\Form_Renderer;
use Jet\Tr;
use Jet\UI;


/**
 * @var MVC_View   $this
 * @var Form       $form
 * @var Sticker    $sticker
 */
$form = $this->getRaw( 'form' );

$form->renderer()->setDefaultLabelWidth( [ Form_Renderer::LJ_SIZE_MEDIUM => 2 ] );
$form->renderer()->setDefaultFieldWidth( [ Form_Renderer::LJ_SIZE_MEDIUM => 8 ] );

$sticker = $this->getRaw( 'sticker' );

?>



<div class="row toolbar" id="main-toolbar">
	<div class="col-md-12">
		<?=UI::button_goBack()?>

		<?php if( !$form->getIsReadonly() ): ?>
			<?=UI::button_save()->setOnclick("$('#".$form->getId()."').submit();")?>
		<?php endif; ?>
	</div>
</div>

<div class="row">

	<div class="col-md-12" id="main-col">

		<?=$form->start()?>
		<?=$form->field( 'internal_name' )?>
		<?=$form->field( 'code' )?>

		<?php foreach(Shops::getList() as $shop):
			$shop_key = $shop->getKey();

			$shop_data = $sticker->getShopData( $shop );
			?>
			<?=$shop_data->renderShopDataBlock_start()?>

			<fieldset>
				<legend class="sub"><?=Tr::_('Main data')?></legend>

				<?=$form->field('/shop_data/'.$shop_key.'/is_active')?>

				<?=$form->field('/shop_data/'.$shop_key.'/name')?>
				<?=$form->field('/shop_data/'.$shop_key.'/second_name')?>
				<?=$form->field('/shop_data/'.$shop_key.'/description')?>
			</fieldset>

			<fieldset>
				<legend class="sub"><?=Tr::_('SEO')?></legend>
				<?=$form->field('/shop_data/'.$shop_key.'/seo_h1')?>
				<?=$form->field('/shop_data/'.$shop_key.'/seo_title')?>
				<?=$form->field('/shop_data/'.$shop_key.'/seo_description')?>
				<?=$form->field('/shop_data/'.$shop_key.'/seo_keywords')?>
				<?=$form->field('/shop_data/'.$shop_key.'/internal_fulltext_keywords')?>
			</fieldset>
			<?=$shop_data->renderShopDataBlock_end()?>
		<?php endforeach; ?>
		<?=$form->end()?>


	</div>
</div>

