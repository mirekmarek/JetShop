<?php
namespace JetShopModule\Admin\Catalog\Categories;

use Jet\Http_Request;
use Jet\MVC_View;
use Jet\UI;
use JetShop\Category;

/**
 * @var MVC_View $this
 */

$category = Controller_Main::getCurrentCategory();

$toolbar = $this->getRaw('toolbar');

?>
<div class="row toolbar" id="main-toolbar">
	<div class="col-md-2">
		<div class="search-box">
			<table>
				<tr>
					<td><?=UI::icon('search')?></td>
					<td>
						<input id="category_search_input" style="width: 250px;">
						<div class="search-whisperer-area">
							<div id="search_category_whisperer">
							</div>
						</div>
					</td>
				</tr>
			</table>
		</div>

	</div>
	<div class="col-md-10">
		<?php if(Main::getCurrentUserCanEditCategory()):
			
				if( Category::getFilter_selectedSort()==Category::SORT_PRIORITY ):
					echo UI::button('Sort categories')->setOnclick('sortCategories.openDialog()').'&nbsp;&nbsp;';
				endif;

				if(
					Main::getCurrentUserCanCreateCategory()
				): ?>
					<?=UI::button_create('Create a new Category')->setUrl( Http_Request::currentURI(['action' => 'create'], ['group_id', 'property_id', 'option_id']))?>
					&nbsp;&nbsp;&nbsp;
				<?php
				endif;
			


			if($toolbar):
				echo $this->render($toolbar);
			endif;

			echo '&nbsp;&nbsp;&nbsp;';

			echo $this->render('category/edit/preview');
		endif; ?>
	</div>
</div>
<div class="row h-100" id="main-col" style="margin-top: -10px;">
	<div class="col-2 tree">
		<?=$this->render('tree')?>
	</div>
	<div class="col-10">
		<?=$this->getRaw('tabs')?>
